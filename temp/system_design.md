# 第 X 章 系统具体设计

本章主要对系统各端的功能模块及其实现流程进行详细设计说明，包括 Web 端和 Android 端不同角色的功能设计。通过对各功能模块的划分及业务流程分析，阐述系统的整体实现思路。

--------------------------------------------------

## X.1 Web 端管理员功能设计

### X.1.1 功能模块概述

Web 端管理员主要负责系统的整体管理与维护，具备最高操作权限。其主要功能模块包括：
- 管理员登录：提供系统后台访问的身份验证功能。
- 用户管理：实现对学生、教师及其他系统用户信息的全生命周期管理。
- 活动审批：对教师提交的志愿活动申请进行合规性审核。
- 积分商城管理：管理商城商品、分类以及兑换凭证的核销。
- 统计分析：对系统运行数据、志愿服务时长及活跃度进行多维度统计。

--------------------------------------------------

### X.1.2 管理员登录模块设计

**（1）功能说明**

管理员通过登录模块进入系统后台管理界面。该模块主要用于对管理员身份进行认证，确保系统安全性，仅允许合法管理员访问系统功能。

**（2）业务流程说明**

【此处预留管理员登录时序图】

如图 X.X 所示，在管理员登录页面中，管理员输入账号和密码并点击“登录”按钮。系统首先对输入信息的完整性和合法性进行校验，若输入不符合约束条件，则返回相应错误提示信息；若校验通过，系统将账号和密码信息提交至后台进行身份验证。后台根据数据库中的管理员信息进行比对，若验证成功，则允许管理员登录并跳转至系统首页；若验证失败，则返回错误信息，提示管理员重新输入。

--------------------------------------------------

### X.1.3 活动审批模块设计

**（1）功能说明**

该模块用于管理员对教师发布的志愿活动申请进行审核。管理员可以查看活动的详细信息，如活动名称、时间、地点、招募人数及积分分配，并决定是否通过。

**（2）业务流程说明**

【此处预留活动审批时序图】

如图 X.X 所示，管理员在活动审批列表页面选择待审核项，系统加载活动详情资料。管理员确认活动内容合法合规后，点击“通过”或“驳回”按钮。若驳回，需填写驳回原因。系统根据操作更新活动状态，并将结果通知对应的教师。

--------------------------------------------------

### X.1.4 兑换核销模块设计

**（1）功能说明**

管理员通过扫描或输入用户提供的兑换凭证码，对积分商城的商品兑换进行实物核销，完成线上线下兑换闭环。

**（2）业务流程说明**

【此处预留兑换核销时序图】

如图 X.X 所示，管理员进入核销界面，输入用户出示的凭证编码。系统在后台核对凭证的有效性及状态。若凭证有效且未被核销，系统执行核销操作，更新记录状态为“已领取”，并返回核销成功提示。

--------------------------------------------------

## X.2 Web 端教师功能设计

### X.2.1 功能模块概述

Web 端教师主要用于课程管理及学生考勤相关操作，其主要功能模块包括：
- 教师登录：教师进入管理后台并访问其权限范围内的功能。
- 活动发布：创建并提交新的志愿服务活动供管理员审核。
- 报名审核：对申请参与活动的学生进行资格筛选与名单确认。
- 考勤管理：生成、导出活动参与记录，监控学生签到状态。

--------------------------------------------------

### X.2.2 教师登录模块设计

**（1）功能说明**

教师通过登录模块进入系统教师端界面，用于开展课程管理及考勤相关操作。

**（2）业务流程说明**

【此处预留教师登录时序图】

如图 X.X 所示，教师在登录页面输入账号和密码后，系统对输入信息进行校验。校验通过后，系统完成身份验证并进入教师主页，否则返回错误提示信息。

--------------------------------------------------

### X.2.3 报名管理模块设计

**（1）功能说明**

教师在此模块查看已报名的学生名单，根据学生简介、历史服务表现等因素决定是否录用其参与本次志愿活动。

**（2）业务流程说明**

【此处预留报名管理时序图】

如图 X.X 所示，教师进入报名列表，查看各学生的申请详情。点击“录用”或“拒绝”后，系统实时更新该学生的报名状态，并发送系统通知告知学生结果。若活动名额已满，系统将自动关闭报名通道。

--------------------------------------------------

## X.3 Web 端学生功能设计

### X.3.1 功能模块概述

Web 端学生主要用于活动查询、报名及个人积分记录查看，其主要功能模块包括：
- 学生登录/注册：通过学号、邮箱等信息建立个人账户并登录。
- 活动发现：浏览全校范围内的志愿服务活动列表，在线提交报名申请。
- 积分中心：查看个人累计积分、积分流水及服务时长统计。
- 个人档案：管理个人简历、荣誉证书及基础信息。

--------------------------------------------------

### X.3.2 积分记录查询模块设计

**（1）功能说明**

学生通过此模块实时跟踪自己的积分变动情况，包括活动奖励积分的增加及商城兑换积分的扣减。

**（2）业务流程说明**

【此处预留积分记录查询时序图】

如图 X.X 所示，学生进入积分中心，系统通过 API 获取该用户的积分账户实时余额。点击“查看记录”后，系统加载分页式的积分变动列表。每一条记录包含变动原因（如：XX活动签到、兑换XX商品）、变动分值及操作时间。

--------------------------------------------------

## X.4 Android 端管理员功能设计

### X.4.1 功能模块概述

Android 端管理员主要用于在移动场景下进行核销、审批及用户监管，具备灵活的现场操作能力。其主要功能模块包括：
- 管理员登录：支持账户密码登录及移动端身份保持。
- 兑换核销：利用摄像头扫描用户兑换码，实现快速核销。
- 活动快速审批：在移动端随时处理紧急的活动发布请求。
- 统计看板：实时查看当日活跃人数、昨日新增活动及待办事项。

--------------------------------------------------

### X.4.2 管理员移动端登录模块设计

**（1）功能说明**

提供管理员在移动设备上的安全访问入口，具备 Token 持久化管理及设备绑定功能。

**（2）业务流程说明**

【此处预留管理员移动端登录时序图】

如图 X.X 所示，管理员打开 Android 应用后显示登录界面。管理员输入凭据并点击登录，系统通过 HTTPS 协议提交加密后的认证信息。后台校验成功后，返回 JWT 签名及权限列表，由于 Android 端的特殊性，系统将其安全存储在本地加密存储区，以支持后续的快速访问。

--------------------------------------------------

### X.4.3 扫码核销模块设计

**（1）功能说明**

利用移动端摄像头硬件，实现对学生出示的二维码兑换凭证的即时扫描与验证，适用于校内实体店现场领奖。

**（2）业务流程说明**

【此处预留扫码核销时序图】

如图 X.X 所示，管理员在管理端点击“扫码核销”唤起摄像头。管理员扫描学生展示的兑换码后，应用解析码内包含的加密凭证信息并发送至后台。后台校验该凭证是否有效且属于本校范围内。若验证通过，系统会自动更新对应的兑换记录为已核销，并在管理员界面展示核销成功的绿色标识。

--------------------------------------------------

## X.5 Android 端教师功能设计

### X.5.1 功能模块概述

Android 端教师功能侧重于活动现场的考勤组织与互动管理。其主要功能模块包括：
- 教师移动端登录：用于现场身份快速切换与验证。
- 签到码管理：实时生成并展示活动签到/签退二维码。
- 现场审核：在活动现场即时处理学生的签退异常申请。
- 个人资料管理：维护教师个人的基本账户信息。

--------------------------------------------------

### X.5.2 签到码生成模块设计

**（1）功能说明**

教师可在活动开始前或进行中，根据系统分配的活动 ID 在手机上生成具有时效性的动态二维码，供现场学生扫码签到。

**（2）业务流程说明**

【此处预留签到码生成时序图】

如图 X.X 所示，教师进入“我的活动”详情页，点击“开启签到”。系统在后台根据活动 ID 生成包含加盐摘要的动态 Token，并由移动端 UI 引擎将其解析绘制为二维码。教师将该屏幕展示给学生，二维码会根据预设的刷新频率（如 30 秒）自动更新 Token 信息，防止跨区域代签到。

--------------------------------------------------

### X.5.3 现场签退审核设计

**（1）功能说明**

针对部分因定位偏差或设备故障无法自助签退的学生，教师可在移动端手动确认其完成服务，确保时长统计准确。

**（2）业务流程说明**

【此处预留现场签退审核时序图】

如图 X.X 所示，教师进入“活动考勤”界面，查看已签到但未签退的学生名单。通过核对实地人数，教师点击对应学生旁边的“人工确认”按钮。系统将该学生的签退状态置为已通过，并记录人工审核的标记位，以便于后续审计。

--------------------------------------------------

## X.6 Android 端学生功能设计

### X.6.1 功能模块概述

Android 端学生功能是学生参与志愿服务的核心入口，旨在提供极致的移动参与体验。其主要功能模块包括：
- 学生登录/注册：支持快速注册及手机验证码登录。
- 扫码签到/签退：利用摄像头及 GPS 定位实现参与证明。
- 积分商城移动端：随地浏览商品、实时兑换、出示核销码。
- 通知中心：实时接收活动状态、积分变动、审核反馈推送。

--------------------------------------------------

### X.6.2 扫码签到模块设计

**（1）功能说明**

学生通过扫描教师提供的二维码，结合自身的地理位置信息（LBS），完成在活动现场的到场确认。

**（2）业务流程说明**

【此处预留扫码签到时序图】

如图 X.X 所示，学生点击首页的“扫一扫”按钮，唤起摄像头。扫描教师端二维码后，应用会同时调用手机的定位权限，获取当前经纬度坐标。应用将二维码 Token 与位置信息一并提交至后台。后台通过算法比对位置是否在活动合规半径内，且 Token 是否在有效期内。校验全部通过后，系统在数据库中插入签到时间点，并向学生返回签到成功提示。

--------------------------------------------------

### X.6.3 移动端积分兑换模块设计

**（1）功能说明**

学生可以随时浏览积分商城，使用积分兑换各类文创产品或志愿时长奖励，并在手机上持有数字凭证。

**（2）业务流程说明**

【此处预留移动端积分兑换时序图】

如图 X.X 所示，学生进入“积分商城”板块，通过瀑布流形式浏览商品。选中商品点击“兑换”后，系统弹出确认窗口。点击确认后，系统在后台执行扣分、库存锁定及凭证生成逻辑。兑换成功后，学生可在“我的兑换”中实时看到该商品的电子凭证。在领取实物时，学生只需点击“展示核销码”，屏幕中间会亮起高对比度二维码供管理员扫描。

--------------------------------------------------

【功能清单】
1. **统一认证**：登录、注册（学生/教师）、验证码发送、密码找回/重置。
2. **活动管理**：活动发布、列表查询、详情展示、报名申请、状态流转（草稿、审核中、已发布、已取消）。
3. **考勤核验**：动态二维码生成（教师）、扫码核销（学生）、地理位置校验、待审核列表、人工补录。
4. **积分中心**：积分流水、总分统计、时长统计、评价系统。
5. **积分商城**：分类过滤、商品展示、库存管理、兑换流程、电子凭证、扫码核销。
6. **个人中心**：资料更新、记录查询（报名记录、服务次数、时长累计）、通知中心、证书下载。
7. **后台管理**：用户 CRUD、权限分配、系统大屏监控、活动合规审批。
